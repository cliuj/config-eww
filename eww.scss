$bg:        #1a1b26;
$fg:        #c0caf5;
$accent:    #7aa2f7;
$muted:     #414868;
$bg-light:  #24283b;
$danger:    #f7768e;
$transition-default: all 0.2s ease;

* {
  all: unset;
  font-family: "JetBrainsMono Nerd Font", monospace;
  font-size: 13px;
  color: $fg;
}

.tooltip-popup {
  background-color: $bg;
  border-radius: 8px;
  padding: 4px 8px;
  border: 1px solid $muted;

  label {
    font-size: 12px;
  }
}

// Outer container — transparent, holds the three groups
.top-bar-outer {
  background-color: transparent;
}

// Pill — rounded rectangle container for each widget group
.pill {
  background-color: $bg;
  border-radius: 12px;
  padding: 4px 8px;

  // Replaces `spacing 4` on each pill's top-level box children.
  // GTK spacing adds a gap between adjacent siblings; use margin-left
  // on every child after the first to reproduce the same gap.
  > * + * { margin-left: 4px; }
}

// Layout
.layout {
  padding: 0 4px;
}

// Workspaces
.workspaces {
  // Replaces `spacing 0` on the workspaces box — ws buttons sit flush.
  // The pill rule above would give the workspaces box itself a left margin
  // (it is a sibling of .layout), but the ws buttons inside get no gap.
  > * { margin-left: 0; }

  .ws {
    min-width: 32px;
    min-height: 32px;
    border-radius: 999px;
    transition: $transition-default;

    // States come from xmonad via _XMONAD_LOG_N xprop:
    //   current  — focused workspace
    //   visible  — shown on another monitor but not focused
    //   hidden   — has windows but not on screen
    //   empty    — no windows at all
    &.current { background-color: darken($accent, 15%); }
    &.visible { background-color: $bg-light; }
    &.empty { color: $muted; opacity: 0.5; }
    &.urgent { color: $danger; }
    &:hover { background-color: $bg-light; }

    .ws-dot {
      min-width: 4px;
      min-height: 4px;
      border-radius: 999px;
      margin-top: 2px;

      &.populated { background-color: $fg; }
    }
  }
}

// DateTime
.datetime {
  padding: 0 10px;
  font-weight: bold;
}


// Weather
.weather {
  padding: 0 10px;

  // Replaces `spacing 6` between the weather icon and temp label.
  .weather-temp {
    font-size: 12px;
    font-weight: bold;
    margin-left: 6px;
  }
}

// Right section: gap between music pill and controls pill
.right-section > .pill + .pill { margin-left: 20px; }

// Music pill: fixed width so it doesn't resize on song/pause changes
.music-pill { min-width: 280px; }

// Music button: same pattern as vol-btn / sysinfo-btn
.music-btn { padding: 0 8px; }
.music-btn .music-label { margin-left: 4px; }

.music-label {
  font-size: 12px;
  font-weight: bold;
}

// Shared control button style
.ctrl-btn {
  min-width: 32px;
  min-height: 32px;
  border-radius: 999px;
  transition: $transition-default;

  &:hover { background-color: $bg-light; }
}

// Shared padding for icon+label button groups
.net-btn,
.vol-btn,
.sysinfo-btn {
  padding: 0 8px 0 8px;
}
// Net button shouldn't reserve fixed width so the label can fully collapse.
.net-btn { min-width: 0; }
// Restore net button horizontal padding now that min-width is removed.
.net-btn { padding: 0 8px; }

// ── Controls pill internal spacing ───────────────────────────────────────────

// Bluetooth/VPN/Network: all three are wrapped in eventboxes inside an anonymous box.
// Replaces `spacing 2` that was on that group box.
// Structure: box > eventbox[bt] + eventbox[vpn] + eventbox[net]
.pill > box > eventbox + eventbox { margin-left: 2px; }

// Sysinfo button: two inner sibling boxes (CPU group + RAM group).
// Replaces `spacing 12` between the CPU and RAM halves.
// Structure: .sysinfo-btn > box > box[cpu] + box[ram]
.sysinfo-btn box > box + box { margin-left: 12px; }

// Sysinfo icon → label gap within each CPU/RAM group.
// Replaces `spacing 4` inside each inner box (image + sysinfo-label).
.sysinfo-btn .sysinfo-label { margin-left: 4px; }

// Net button icon → revealed label gap.
.net-btn .net-label { margin-left: 4px; }
// Try revealer again with minimal layout impact.
.net-reveal {
  min-width: 0;
  padding: 0;
  margin: 0;
}

// Volume button icon → percentage label gap. Replaces `spacing 4` inside vol-btn box.
.vol-btn .vol-label { margin-left: 4px; }

// Shared readout label style
.net-label,
.vol-label {
  font-size: 12px;
  font-weight: bold;
}

// Toggle button base
%toggle-btn-base {
  min-width: 32px;
  min-height: 32px;
  opacity: 0.4;
}

.vpn-btn {
  @extend %toggle-btn-base;
  &.vpn-on { opacity: 1; }
}

.bluetooth-btn {
  @extend %toggle-btn-base;
  &.bt-on { opacity: 1; }
  &.bt-on.bt-connected { padding: 0 4px 0 8px; }
}

.bt-count {
  font-size: 12px;
  font-weight: bold;
  margin-left: 4px;
}

// System info
.sysinfo-label {
  font-size: 12px;
  font-weight: bold;
  color: $muted;
}

// Volume dropdown (separate window)
.volume-dropdown {
  background-color: $bg;
  border-radius: 12px;
  padding: 8px;

  .vol-slider {
    trough {
      min-width: 8px;
      border-radius: 999px;
      background-color: $muted;

      highlight {
        border-radius: 999px;
        background-color: $accent;
      }

      slider {
        min-width: 12px;
        min-height: 12px;
        border-radius: 999px;
        background-color: $fg;
        margin: 0 -2px;
      }
    }
  }
}

// Calendar dropdown (separate window)
.calendar-dropdown {
  background-color: $bg;
  border-radius: 12px;
  padding: 20px;

  .cal {
    font-size: 16px;

    &.header,
    &.highlight {
      color: $accent;
      font-weight: bold;
    }

    &:selected {
      background-color: $accent;
      color: $bg;
      border-radius: 6px;
    }

    &:indeterminate {
      color: $muted;
    }
  }
}

// Power dropdown (separate window)
.power-dropdown {
  background-color: $bg;
  border-radius: 12px;
  padding: 6px;

  // Replaces `spacing 4` on the vertical power-dropdown box.
  > * + * { margin-top: 4px; }

  .power-item {
    padding: 4px 6px;
    border-radius: 8px;
    font-size: 13px;
    transition: $transition-default;

    &:hover { background-color: $bg-light; }
    &.poweroff:hover { color: $danger; background-color: rgba($danger, 0.15); }
  }
}
